import Constants from '../constants';
import Utils from '../utils';

const { OMEGA } = Constants;
const { DEFAULT_LOG_LEVEL, ALLOWED_FIELDS } = OMEGA;
const { sanitizeObj } = Utils;

export default class Omega {
  constructor(mrId) {
    this.mrId = mrId;
  }

  // @TODO renombrar a normalizeLog? buildLog?
  /* static */
  createLog(obj) {
    const { mrId } = this;
    const sanitizedData = sanitizeObj(obj, ALLOWED_FIELDS);
    const DEFAULT_LOG = {
      mrId,
      creationDate: Date.now() * 1000000,
      level: DEFAULT_LOG_LEVEL,
    };

    return {
      ...DEFAULT_LOG,
      ...sanitizedData,
    };
  }
}
